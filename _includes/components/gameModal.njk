<button 
	type='button'
	aria-label='Close modal'
	class="x-cloak opacity-0 fixed inset-0 bg-gradient-to-br from-blue-600 to-purple-700 z-0 transition-all mix-blend-multiply"
	:class='{
		"pointer-events-auto opacity-50": modalIsOpen,
		"opacity-0 pointer-events-none": !modalIsOpen
	}'
	@click="closeModal()"></button>


<section id='gameModal' class='fixed overflow-scroll inset-x-0 top-3 sm:top-16 transition-all opacity-0' :class='{
	"pointer-events-auto opacity-100": modalIsOpen,
	"opacity-0 scale-99 translate-y-12 pointer-events-none": !modalIsOpen
	}'
	>
	
	{# <div class='w-full h-56 bg-gradient-to-t from-blue-600 flex flex-col items-center shadow-2xl py-8 opacity-20 shadow-xl'>
	</div> #}
	
	
	
	<div id='gameModalCard' class='shadow-2xl relative overflow-y-scroll overflow-x-hidden bg-white w-[95%] 2xl:w-fit min-h-[600px] mx-auto p-6 py-4 sm:p-12 pb-12 border-t-2 border-blue-600 flex flex-col sm:flex-row justify-between max-h-screen' @click.outside='closeModal()'>
	
		<div class='hidden md:block absolute z-50 top-12 right-12'>
			<button type='button' class='z-50 bg-white bg-opacity-70 h-fit w-fit backdrop-blur-lg shadow-md absolute right-0 top-0 hover:bg-slate-50 rounded-full p-2' @click='closeModal()'>
				{{ '/phosphor-icons/regular/x.svg' | svgContents("icon-xl fill-slate-600 hover:fill-slate-700 opacity-50") | safe }}
			</button>
		</div>

		<img aria-hidden="true" alt='' width='1000px' class='pointer-events-none absolute inset-y-0 opacity-[0.15] -right-[180px] z-0 blur-2xl saturate-150' src='/images/backgrounds/blur_1.svg' />
		
		
		<img aria-hidden="true" alt='' width='1000px' class='pointer-events-none absolute -inset-bottom-[64px] opacity-10 -left-[64px] z-0 blur-2xl saturate-150' src='/images/backgrounds/blur_1.svg' />
		
		
		<div class='flex flex-col justify-between'>
			<button class='md:hidden z-50 text-blue-700 hover:underline sm:text-lg px-6 font-semibold mb-2 border border-blue-70 rounded-full p-1 mx-auto sm:ml-0 md:mr-auto sm:mx-none block md:mb-8 top-0 sticky  bg-white backdrop-blur-lg bg-opacity-80 shadow-md' @click='closeModal()'>
			 â€¹ Back to all games
			</button>
			
			<div class='mb-16 sm:mb-6'>
			
				
				<h1 class='text-4xl sm:text-5xl font-bold mb-3 sm:mb-4 mt-6 sm:mt-0' x-text='selectedGame?.title'><h1>
				<p class='text-slate-500 max-w-xl sm:text-xl' x-text='selectedGame?.description'></p>
			</div>
			
			<div class='flex flex-col items-stretch justify-start lg:flex-row '>
				<aside class='z-10 mb-4 max-w-[600px] min-width-[300px] md:mr-12'>
				
					<div class='relative w-full bg-slate-300 background-pulse shadow-xl shadow-blue-500/50 w-full sm:w-[600px]' style='aspect-ratio: 16 / 9;'>
					
						<iframe style="position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;" class='z-20' 
							width="100%" height="100%" frameborder="0" title="Embedded YouTube video"
							:src="selectedGame ? ('https://www.youtube-nocookie.com/embed/' + (selectedGame && selectedGame.demoVideoYouTubeId) +'?allowAttrs=&allowfullscreen=true&') : ''"
							loading="lazy"></iframe>
							
							<span class='w-full h-full flex justify-center items-center relative z-10'>
								{{ '/phosphor-icons/fill/play-circle-fill.svg' | svgContents("icon-6xl fill-slate-500 opacity-50") | safe }}
							<span>
					</div>
					
					<div class='flex justify-between mt-6'>
						<div class='w-1/2 background-pulse mr-3' style='content: " "; aspect-ratio: 1 / 1;''>
							<img :class='{  "hidden": !modalIsOpen }' width='300' height='300' :alt="'Image of ' + selectedGame?.title" class="bg-transparent object-cover w-full hidden" loading="lazy" decoding="async"  :src="selectedGame ? ('/images/games/' + selectedGame?.imageUrl) : ''">
						</div>
						
						<div class='w-1/2 bg-slate-300  ml-3' style='content: " "; aspect-ratio: 1 / 1;''>
							
						</div>
						
					</div>
					
				</aside>
				
				<aside>
					{% include 'components/gameStats.njk' %}
					{% include 'components/nextPreviousButtons.njk' %}
				</aside>
			</div>
		</div>
		
	</div>
	
</section>

